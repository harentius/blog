#!/bin/sh

bin_dir=$(cd $(dirname $0) && pwd)
base_dir=$(cd "$bin_dir/.." && pwd)
web_dir="$base_dir/web"
app_dir="$base_dir/app"
console="bin/console"
config_dir="$base_dir/app/config"

cd $base_dir

exec_console() {
    cmd=$1
    shift
    $console $cmd "$@"
}

exec_bin() {
    bin=$1
    shift
    "$bin_dir/$bin" "$@"
}

write_title() {
    echo "======= $@"
}

read_env_parameter() {
    dot_env_file_path="$base_dir/.env.dist"
    parameter_name=$1
    env_val=${!parameter_name:-}

    if [ ! -z "$env_val" ]; then
        parameter_value="$env_val"
    else
        parameter_value="$(cat "$dot_env_file_path" | sed -n "s/^$1=\(.*\)$/\1/p")"
    fi

    env echo -n "$parameter_value"
}

get_switch() {
    if [ ! -z "$2" ]; then
        env echo -n "$1$2"
    fi
}
