services:
    twig.extension.intl:
        class: Twig_Extensions_Extension_Intl
        tags:
            - { name: twig.extension }

    harentius_blog.menu.menu_builder:
        class:  Harentius\BlogBundle\Menu\MenuBuilder
        arguments:
            - @knp_menu.factory
            - @doctrine.orm.entity_manager
            - %harentius_blog.homepage.page_slug%

    harentius_blog.menu.main:
        class: Knp\Menu\MenuItem
        factory: [@harentius_blog.menu.menu_builder, createMainMenu]
        tags:
            - { name: knp_menu.menu, alias: main }

    harentius_blog.array_cache:
        class: Doctrine\Common\Cache\ArrayCache

    harentius_blog.sidebar.cache:
        class: Doctrine\Common\Cache\ApcCache
        calls:
            - [ setNamespace, [ harentius_blog_sidebar ] ]

    harentius_blog.twig.blog_extension:
        class: Harentius\BlogBundle\Twig\BlogExtension
        arguments:
            - @fragment.handler
            - ~
            - %sidebar_cache_filefime%
        tags:
            - { name: twig.extension }

    harentius_blog.sidebar.categories:
        class: Harentius\BlogBundle\Sidebar\Categories
        arguments:
            - @harentius_blog.entity.category_repository

    harentius_blog.sidebar.tags:
        class: Harentius\BlogBundle\Sidebar\Tags
        arguments:
            - @harentius_blog.entity.tag_repository
            - %harentius_blog.sidebar.tags_limit%
            - %harentius_blog.sidebar.tag_sizes%

    harentius_blog.sidebar.archive:
        class: Harentius\BlogBundle\Sidebar\Archive
        arguments:
            - @harentius_blog.entity.article_repository

    harentius_blog.feed:
        class: Harentius\BlogBundle\Feed
        arguments:
            - @harentius_blog.entity.article_repository
            - %harentius_blog.homepage.feed.category%
            - %harentius_blog.homepage.feed.number%

    harentius_blog.assets.resolver:
        class: Harentius\BlogBundle\Assets\Resolver
        arguments:
             - "%kernel.root_dir%/../web"

    harentius_blog.assets.manager:
        class: Harentius\BlogBundle\Assets\Manager
        arguments:
            - @harentius_blog.assets.resolver
